#
# file contains all the swagger schema and req and response bodies for tv-show
#

components:
  schemas:
    TvShow:
      type: object
      required:
        - title
        - description
        - genre
        - releaseDate
        - runTime
        - status
        - totalSeasons
        - totalEpisodes
      properties:
        title:
          type: string
          description: The title of the TV show.
          example: 'Breaking Bad'
        description:
          type: string
          description: A brief summary of the show.
          example: 'A high school chemistry teacher turned methamphetamine producer navigates the dangers of the criminal underworld.'
        averageRating:
          type: number
          description: The average rating of the TV show, on a scale of 0 to 10.
          format: float
          maximum: 10
          example: 9.5
        genre:
          type: array
          description: List of genres for the TV show.
          items:
            $ref: '#/components/schemas/GenreMovieTvEnum'
          example: ['Drama', 'Crime']
        releaseDate:
          format: date-time
          description: The release date (ISO 8601 UTC, e.g., 2016-07-21T00:00:00.000Z).
          example: '2008-07-21T00:00:00.000Z'
        cast:
          type: array
          description: List of cast members.
          items:
            type: string
          example: ['Bryan Cranston', 'Aaron Paul']
        directors:
          type: array
          description: List of directors.
          items:
            type: string
          example: ['Vince Gilligan']
        runTime:
          type: integer
          description: Runtime of each episode, in minutes.
          example: 47
        languages:
          type: array
          description: List of spoken languages.
          items:
            type: string
          example: ['English', 'Spanish']
        posterUrl:
          type: string
          description: URL for the poster image.
          example: 'http://example.com/poster.jpg'
        backdropUrl:
          type: string
          description: URL for the backdrop image.
          example: 'http://example.com/backdrop.jpg'
        isActive:
          type: boolean
          description: Indicates if the show is currently active in the system.
          default: true
          example: true
        status:
          type: string
          description: The current status of the media.
          enum: ['released', 'upcoming']
          example: 'ended'
        tags:
          type: array
          description: List of tag strings.
          items:
            $ref: '#/components/schemas/TagsMovieTvEnum'
        totalSeasons:
          type: integer
          description: Total number of seasons.
          example: 5
        totalEpisodes:
          type: integer
          description: Total number of episodes.
          example: 62
        ageRating:
          type: integer
          description: Suggested viewer age rating.
          example: 18
    TvShowResponseFull:
      allOf:
        - $ref: '#/components/schemas/TvShow'
      properties:
        seasons:
          type: array
          items:
            $ref: '#/components/schemas/SeasonResponseFull'
    TvShowDeleteCount:
      type: object
      properties:
        tvShow:
          type: integer
          example: 1
        seasons:
          type: integer
          example: 1
        episodes:
          type: integer
          example: 1

  requestBodies:
    AddTvShowBody:
      description: The request body for creating a new TV Show.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/TvShowResponseFull'
          example:
            title: 'Fleabag'
            description: 'A dry-witted woman, known only as Fleabag, navigates life and love in London while trying to cope with tragedy.'
            averageRating: 8.7
            genre: ['Comedy', 'Drama']
            releaseDate: '2016-07-21T00:00:00.000Z'
            cast: ['Phoebe Waller-Bridge', 'Sian Clifford', 'Olivia Colman']
            directors: ['Harry Bradbeer']
            runTime: 27
            languages: ['English']
            posterUrl: 'https://m.media-amazon.com/images/M/MV5B...'
            backdropUrl: 'https://www.themoviedb.org/t/p/original/...'
            isActive: true
            status: 'released'
            tags:
              - 'Award-winning'
              - 'Character-driven'
              - 'Dialogue-heavy'
              - 'Satirical'
            totalSeasons: 2
            totalEpisodes: 12
            ageRating: 16
            seasons:
              - seasonNumber: 1
                title: 'Season 1'
                description: 'Fleabag navigates...'
                releaseDate: '2016-07-21T00:00:00.000Z'
                noOfEpisodes: 6
                posterUrl: 'https://www.themoviedb.org/t/p/w220_and_h330_face/ohh0255e0x9a8y6eSyrDLi2hM96.jpg'
                seasonRating: 8.5
                status: ended
                trailerYoutubeUrl: 'https://www.youtube.com/watch?v=I5Uv6cb9YRs'
                episodes:
                  - title: 'Episode 1'
                    description: 'Fleabag tries...'
                    episodeNumber: 1
                    runTime: 27
                  - title: 'Episode 2'
                    description: 'With the cafe struggling...'
                    episodeNumber: 2
                    runTime: 26
    FilterTvShowBody:
      description: The request body for filtering TV Shows.
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              title:
                type: string
                description: Filter by the title of the TV show.
                example: 'The Office'
              averageRating:
                type: number
                format: float
                description: Filter by the minimum average rating (0-10).
                example: 8.5
              genre:
                type: array
                items:
                  type: string
                description: Filter by a list of genres.
                example: ['Comedy', 'Documentary']
              releaseDate:
                type: object
                description: Filter by a release date range.
                properties:
                  gte:
                    type: string
                    format: date-time
                    description: 'The minimum release date (inclusive).'
                  lte:
                    type: string
                    format: date-time
                    description: 'The maximum release date (inclusive).'
                example:
                  gte: '2005-03-24T00:00:00Z'
              totalEpisodes:
                type: object
                description: Filter by a range for the total number of episodes.
                properties:
                  gte:
                    type: integer
                    description: The minimum number of episodes.
                  lte:
                    type: integer
                    description: The maximum number of episodes.
                example:
                  gte: 150
              runTime:
                type: object
                description: Filter by a range for the episode run time in minutes.
                properties:
                  gte:
                    type: integer
                    description: The minimum run time.
                  lte:
                    type: integer
                    description: The maximum run time.
                example:
                  lte: 30
              status:
                type: string
                description: Filter by the current status of the TV show.
                example: 'Ended'
              languages:
                type: array
                items:
                  type: string
                description: Filter by a list of languages.
                example: ['English']
              tags:
                type: array
                items:
                  type: string
                description: Filter by a list of tags.
                example: ['workplace', 'mockumentary']
              totalSeasons:
                type: object
                description: Filter by a range for the total number of seasons.
                properties:
                  gte:
                    type: integer
                    description: The minimum number of seasons.
                  lte:
                    type: integer
                    description: The maximum number of seasons.
                example:
                  gte: 9
              limit:
                type: integer
                description: The maximum number of results to return per page.
                default: 10
                example: 20
              page:
                type: integer
                description: The page number of the results.
                default: 1
                example: 1
              searchText:
                type: string
                description: A general text search across multiple fields.
                example: 'Dunder Mifflin'
    BulkDeleteTvShowRequest:
      description: The request body for bulk deleting TV Shows.
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              tvShowIds:
                type: array
                items:
                  type: string
                description: An array of TV Show IDs to delete.
                example:
                  [
                    '630f06f6f80f0c456d5d3e11',
                    '630f06f6f80f0c456d5d3e15',
                    '630f06f6f80f0c456d5d3e14',
                  ]
    UpdateTvShowRequest:
      description: The request body for updating a TV Show.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/TvShow'

  responses:
    TvShowResponse:
      description: A single TV Show object including seasons and episodes.
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
              message:
                type: string
              data:
                type: object
                properties:
                  tvShow:
                    $ref: '#/components/schemas/TvShowResponseFull'
          example:
            success: true
            message: 'Tv show created successfully'
            data:
              tvShow:
                title: 'Fleabag'
                description: 'A dry-witted woman, known only as Fleabag, navigates life and love in London while trying to cope with tragedy.'
                averageRating: 8.7
                genre: ['Comedy', 'Drama']
                releaseDate: '2016-07-21'
                cast: ['Phoebe Waller-Bridge', 'Sian Clifford', 'Olivia Colman']
                directors: ['Harry Bradbeer']
                runTime: 27
                languages: ['English']
                posterUrl: 'https://m.media-amazon.com/images/...jpg'
                backdropUrl: 'https://www.themoviedb.org/t/p/original/...jpg'
                isActive: true
                status: 'released'
                tags:
                  - 'Award-winning'
                  - 'Character-driven'
                  - 'Dialogue-heavy'
                  - 'Satirical'
                totalSeasons: 2
                totalEpisodes: 12
                ageRating: 16
                seasons:
                  - seasonNumber: 1
                    title: 'Season 1'
                    description: 'Fleabag navigates the minefield of her family and dating life while dealing with the recent death of her best friend.'
                    releaseDate: '2016-07-21'
                    noOfEpisodes: 6
                    posterUrl: 'https://www.themoviedb.org/t/...jpg'
                    seasonRating: 8.5
                    status: ended
                    trailerYoutubeUrl: 'https://www.youtube.com/watch?v=I5Uv6cb9YRs'
                    episodes:
                      - title: 'Episode 1'
                        description: 'Fleabag tries to navigate a tricky family lunch and a one-night stand.'
                        episodeNumber: 1
                        runTime: 27
                      - title: 'Episode 2'
                        description: 'With the cafe struggling, Fleabag asks her sister for money...'
                        episodeNumber: 2
                        runTime: 26

    GetAllTvShowsSuccessResponse:
      description: Success response for getting all tv shows
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
              message:
                type: string
              data:
                type: object
                properties:
                  tvShows:
                    type: array
                    items:
                      oneOf:
                        - $ref: '#/components/schemas/TvShow'
                        - $ref: '#/components/schemas/TvShowResponseFull'
                  pagination:
                    $ref: '#/components/schemas/pagination'

    GetTvShowsBySearchSuccessResponse:
      description: Success response for getting tv shows by search
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
              message:
                type: string
              data:
                type: object
                properties:
                  tvShows:
                    type: array
                    items:
                      $ref: '#/components/schemas/TvShow'
                  pagination:
                    $ref: '#/components/schemas/pagination'

    GetTvShowSuccessResponse:
      description: Success response for getting a single tv show
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
              data:
                $ref: '#/components/schemas/TvShowResponseFull'

    DeleteTvShowSuccessResponse:
      description: Success response for deleting a single tv show
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: true
              data:
                type: object
                properties:
                  deletedCount:
                    $ref: '#/components/schemas/TvShowDeleteCount'
              message:
                type: string
                example: 'Tv show deleted successfully'

    BulkDeleteTvShowSuccessResponse:
      description: Success response for bulk deleting tv shows
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: true
              message:
                type: string
                example: 'Tv shows deleted successfully'
              data:
                type: object
                properties:
                  deleteCount:
                    $ref: '#/components/schemas/TvShowDeleteCount'

    BulkAddTvShowSuccessResponse:
      description: Success response for bulk adding tv shows
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: true
              message:
                type: string
                example: 'Tv shows added successfully'
              data:
                type: array
                items:
                  $ref: '#/components/schemas/TvShow'
